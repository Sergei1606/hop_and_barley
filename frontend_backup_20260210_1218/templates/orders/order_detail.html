{% extends 'base.html' %}

{% block title %}–ó–∞–∫–∞–∑ #{{ order.id }} - Hop & Barley{% endblock %}

{% block content %}
<div class="order-detail-container" style="max-width: 1000px; margin: 0 auto;">
    <h1>üìã –ó–∞–∫–∞–∑ #{{ order.id }}</h1>

    <div style="margin: 20px 0;">
        <a href="{% url 'users:order_history' %}" class="btn btn-secondary">‚Üê –ö –∏—Å—Ç–æ—Ä–∏–∏ –∑–∞–∫–∞–∑–æ–≤</a>
        <a href="{% url 'users:profile' %}" class="btn btn-secondary">–í –ø—Ä–æ—Ñ–∏–ª—å</a>
    </div>

    <div class="order-info" style="border: 1px solid #ddd; border-radius: 8px; padding: 20px; margin-bottom: 30px;">
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
            <div>
                <h3>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–∫–∞–∑–µ</h3>
                <p><strong>–ù–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞:</strong> #{{ order.id }}</p>
                <p><strong>–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:</strong> {{ order.created_at|date:"d.m.Y H:i" }}</p>
                <p><strong>–°—Ç–∞—Ç—É—Å:</strong>
                    <span style="background:
                        {% if order.status == 'delivered' %}#d4edda
                        {% elif order.status == 'cancelled' %}#f8d7da
                        {% elif order.status == 'shipped' %}#cce5ff
                        {% elif order.status == 'paid' %}#fff3cd
                        {% else %}#e2e3e5{% endif %};
                        color:
                        {% if order.status == 'delivered' %}#155724
                        {% elif order.status == 'cancelled' %}#721c24
                        {% elif order.status == 'shipped' %}#004085
                        {% elif order.status == 'paid' %}#856404
                        {% else %}#383d41{% endif %};
                        padding: 4px 12px; border-radius: 4px;">
                        {{ order.get_status_display }}
                    </span>
                </p>
                <p><strong>–û–±—â–∞—è —Å—É–º–º–∞:</strong> {{ order.total_price }} —Ä—É–±.</p>
            </div>

            <div>
                <h3>–î–∞–Ω–Ω—ã–µ –¥–æ—Å—Ç–∞–≤–∫–∏</h3>
                <p><strong>–ê–¥—Ä–µ—Å:</strong> {{ order.shipping_address }}</p>
                <p><strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> {{ order.phone }}</p>
                <p><strong>Email:</strong> {{ order.email }}</p>
            </div>
        </div>
    </div>

    <div class="order-items">
        <h3>–¢–æ–≤–∞—Ä—ã –≤ –∑–∞–∫–∞–∑–µ</h3>
        <table style="width: 100%; border-collapse: collapse; margin-top: 20px;">
            <thead>
                <tr style="background: #f5f5f5;">
                    <th style="padding: 15px; text-align: left;">–¢–æ–≤–∞—Ä</th>
                    <th style="padding: 15px; text-align: center;">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</th>
                    <th style="padding: 15px; text-align: right;">–¶–µ–Ω–∞ –∑–∞ –µ–¥–∏–Ω–∏—Ü—É</th>
                    <th style="padding: 15px; text-align: right;">–°—É–º–º–∞</th>
                </tr>
            </thead>
            <tbody>
                {% for item in order.items.all %}
                <tr style="border-bottom: 1px solid #eee;">
                    <td style="padding: 15px;">
                        <strong>{{ item.product.name }}</strong>
                    </td>
                    <td style="padding: 15px; text-align: center;">{{ item.quantity }} —à—Ç.</td>
                    <td style="padding: 15px; text-align: right;">{{ item.price }} —Ä—É–±.</td>
                    <td style="padding: 15px; text-align: right;">{{ item.get_total }} —Ä—É–±.</td>
                </tr>
                {% endfor %}
            </tbody>
            <tfoot>
                <tr>
                    <td colspan="3" style="padding: 15px; text-align: right; font-weight: bold;">–ò—Ç–æ–≥–æ:</td>
                    <td style="padding: 15px; text-align: right; font-weight: bold; font-size: 1.2em;">
                        {{ order.total_price }} —Ä—É–±.
                    </td>
                </tr>
            </tfoot>
        </table>
    </div>
</div>

<style>
    .btn {
        padding: 10px 20px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        text-decoration: none;
        display: inline-block;
        margin-right: 10px;
    }
    .btn-secondary {
        background: #ddd;
        color: #333;
    }
    .btn-secondary:hover {
        background: #ccc;
    }
</style>
{% endblock %}