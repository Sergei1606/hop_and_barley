{% extends 'base.html' %}

{% block title %}–ö–æ—Ä–∑–∏–Ω–∞ - Hop & Barley{% endblock %}

{% block content %}
<h1>üõí –í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞</h1>

<div class="cart-container">
    {% if cart.get_total_items > 0 %}
        {% for item in cart.get_items %}
        <div class="cart-item">
            <div class="item-info">
                <h3>{{ item.product.name }}</h3>
                <p>{{ item.product.description|truncatechars:100 }}</p>
            </div>

            <div class="item-price">
                {{ item.price }} —Ä—É–±. √ó
            </div>

            <div class="quantity-control">
                <span>{{ item.quantity }} —à—Ç.</span>
            </div>

            <div class="item-total">
                {{ item.total_price }} —Ä—É–±.
            </div>

            <a href="{% url 'cart:remove_from_cart' item.product.id %}"
               class="remove-btn"
               onclick="return confirm('–£–¥–∞–ª–∏—Ç—å —Ç–æ–≤–∞—Ä –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã?')">
                –£–¥–∞–ª–∏—Ç—å
            </a>
        </div>
        {% endfor %}

        <div class="cart-summary">
            <h3>–ò—Ç–æ–≥–æ: {{ cart.get_total_price }} —Ä—É–±.</h3>
            <p>–¢–æ–≤–∞—Ä–æ–≤: {{ cart.get_total_items }} —à—Ç.</p>
        </div>

        <div class="cart-actions">
            <a href="{% url 'products:product_list' %}" class="btn btn-secondary">
                ‚Üê –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø–æ–∫—É–ø–∫–∏
            </a>
            <a href="{% url 'cart:clear_cart' %}" class="btn btn-secondary"
               onclick="return confirm('–û—á–∏—Å—Ç–∏—Ç—å –≤—Å—é –∫–æ—Ä–∑–∏–Ω—É?')">
                –û—á–∏—Å—Ç–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É
            </a>
            <a href="#" class="btn btn-primary">
                –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑ ‚Üí
            </a>
        </div>
    {% else %}
        <div class="empty-cart">
            <h2>–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</h2>
            <p>–î–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä—ã –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞</p>
            <a href="{% url 'products:product_list' %}" class="btn btn-primary">
                –ü–µ—Ä–µ–π—Ç–∏ –∫ –ø–æ–∫—É–ø–∫–∞–º
            </a>
        </div>
    {% endif %}
</div>

<style>
    .cart-container { border: 1px solid #ddd; padding: 20px; border-radius: 8px; }
    .cart-item { display: flex; align-items: center; padding: 15px; border-bottom: 1px solid #eee; }
    .cart-item:last-child { border-bottom: none; }
    .item-info { flex: 1; }
    .item-price { font-weight: bold; color: green; margin-right: 20px; }
    .item-total { font-weight: bold; color: #333; }
    .quantity-control { display: flex; align-items: center; gap: 10px; }
    .quantity-input { width: 60px; padding: 5px; }
    .remove-btn { color: #ff4444; text-decoration: none; margin-left: 20px; }
    .remove-btn:hover { text-decoration: underline; }
    .cart-summary { margin-top: 20px; padding: 15px; background: #f5f5f5; border-radius: 4px; }
    .cart-actions { margin-top: 20px; }
    .btn {
        padding: 10px 20px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        text-decoration: none;
        display: inline-block;
    }
    .btn-primary { background: #4CAF50; color: white; }
    .btn-primary:hover { background: #45a049; }
    .btn-secondary { background: #ddd; color: #333; }
    .btn-secondary:hover { background: #ccc; }
    .empty-cart { text-align: center; padding: 40px; color: #666; }
</style>
{% endblock %}